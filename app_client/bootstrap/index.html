<ng-include src="'templates/menu.html'"></ng-include>

<table id ="raspas" class="table table-hover">
	<thead>
		<tr>
			<th class=" text-center" scope="col">Расписание занятий с учетом замен</th>
			<th class=" text-center" scope="col">Дисциплина, МДК</th>
			<th class=" text-center" scope="col">Пара</th>
			<th class=" text-center" scope="col">Комментарий</th>
			<th class=" text-center" scope="col">Аудитория</th>
		</tr>

	</thead>
	<tbody ng-repeat="(keyItem, item) in vm.schedule">
		<tr>
			<th  colspan = "5" class="table-info text-center">{{item.group}}</th>
		</tr>
		<tr ng-repeat="(keyRow, row) in item.lessons">
			<td>{{row.teacher}}</td>
			<td>{{row.discipline}}</td>
			<td>{{row.number}}</td>
			<td>{{row.comment}}</td>
			<td>{{row.auditorium}}</td>

		</tr>
		<tr>
			<td>
				<md-autocomplete
				form="myFrr{{keyItem}}"
				md-selected-item="vm['selectedItem' + keyItem]"
				md-search-text-change="vm.searchTextChange(vm['searchText' + keyItem])"
				md-search-text="vm['searchText' + keyItem]"
				md-selected-item-change="vm.selectedItemChange(itemTeacher)"
				md-items="itemTeacher in vm.content | filter:vm['searchText' + keyItem]"
				md-item-text="itemTeacher.name"
				md-min-length="0"
				placeholder="Фамилия Преподавателя"
				<md-item-template>
					<span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{itemTeacher.name}}</span>
				</md-item-template>
				<md-not-found>
					Преподаватель не найден
				</md-not-found>
			</md-autocomplete>
		</td>
		<td>
			<any ng-repeat="item in vm.content | filter:{name: vm['searchText' + keyItem]} | limitTo:1">
				<md-autocomplete
				form="myFrr{{keyItem}}"
				md-selected-item="vm['selectedSub' + keyItem]"
				md-search-text-change="vm.searchSubChange(vm['searchSub' + keyItem])"
				md-search-text="vm['searchSub' + keyItem]"
				md-selected-item-change="vm.selectedSubChange(subject)"
				md-items="subject in item.subject"
				md-item-text="subject"
				md-min-length="0"
				placeholder="Предмет"
				<md-item-template>
					<span md-highlight-text="vm.searchSub" md-highlight-flags="^i">{{subject}}</span>
				</md-item-template>
				<md-not-found>
					Предмет не найден
				</md-not-found>
			</md-autocomplete>
		</any>
	</td>
	<th scope="row"></th>
	<td>
		<md-input-container class="inputCont">
			<input ng-model="vm.comment[keyItem]"  form="myFrr{{keyItem}}" ng-model-options="{ allowInvalid: true }" >
		</md-input-container></td>
		<td>
			<form ng-submit="vm.addForm(keyItem)" id="myFrr{{keyItem}}">
				<md-input-container class="inputCont ">
					<input ng-model="vm.auditorium[keyItem]"  form="myFrr{{keyItem}}" >
				</md-input-container>
				<input type="submit" class="btn btn-primary" value="Добавить" >
			</form>
		</td>
	</tr>
</tbody>
</table>